<app-toast #toast></app-toast>
<div class="form-container">
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <h1>Cadastro de Visitantes</h1>

    <div class="form-group">
      <label for="name">Nome:</label>
      <input
        id="name"
        type="text"
        formControlName="name"
        placeholder="Digite o nome completo"
      />
      <div
        *ngIf="
          registerForm.get('name')?.invalid && registerForm.get('name')?.touched
        "
      >
        <small *ngIf="registerForm.get('name')?.errors?.['required']"
          >Nome é obrigatório</small
        >
        <small *ngIf="registerForm.get('name')?.errors?.['minlength']"
          >Nome deve ter pelo menos 2 caracteres</small
        >
      </div>
    </div>

    <div class="form-group">
      <label for="rg">RG:</label>
      <input
        id="rg"
        type="text"
        formControlName="rg"
        placeholder="Digite o RG ou CPF"
      />
      <div
        *ngIf="
          registerForm.get('rg')?.invalid && registerForm.get('rg')?.touched
        "
      >
        <small *ngIf="registerForm.get('rg')?.errors?.['required']"
          >RG é obrigatório</small
        >
        <small *ngIf="registerForm.get('rg')?.errors?.['pattern']"
          >RG deve conter apenas números</small
        >
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Digite o email"
      />
      <div
        *ngIf="
          registerForm.get('email')?.invalid &&
          registerForm.get('email')?.touched
        "
      >
        <small *ngIf="registerForm.get('email')?.errors?.['required']"
          >Email é obrigatório</small
        >
        <small *ngIf="registerForm.get('email')?.errors?.['email']"
          >Email inválido</small
        >
      </div>
    </div>

    <div class="form-group">
      <label for="photo">Foto para a Identificação:</label>
      <div class="file-upload">
        <label for="photo">Selecionar Arquivo</label>
        <input id="photo" type="file" (change)="onFileSelected($event)" />
        <span>{{ selectedFile?.name }}</span>
      </div>
      <div *ngIf="!selectedFile && registerForm.get('photo')?.touched">
        <small>Foto é obrigatória</small>
      </div>
    </div>

    <button type="submit" [disabled]="registerForm.invalid || !selectedFile">
      Cadastrar
    </button>
  </form>
</div>
